<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="https://github.com/cygnus-the-series/cygnus-site/blob/main/favicon.png?raw=true">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYGNUS | Contact</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400&display=swap');

        :root {
            --bg-color: #050505;
            --text-color: #f0f0f0;
            --accent-color: #c5a059;
            --dim-text: #888;
            --border: rgba(255,255,255,0.1);
        }

        *, *::before, *::after { box-sizing: border-box; }

        body, html {
            margin: 0; padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            background-image: linear-gradient(rgba(0,0,0,0.88), rgba(0,0,0,0.88)),
                url('https://raw.githubusercontent.com/cygnus-the-series/cygnus-site/main/spaghetti.png');
            background-attachment: fixed;
            background-size: cover;
            background-position: center;
            min-height: 100vh;
        }

        /* ── NAV ──────────────────────────────────────────── */
        .nav-bar {
            display: flex; justify-content: center;
            padding: 30px 0; gap: 40px;
            border-bottom: 1px solid var(--border);
        }
        .nav-bar a {
            color: var(--text-color); text-decoration: none;
            font-size: 0.7rem; letter-spacing: 0.3rem;
            font-weight: 300; text-transform: uppercase; transition: 0.3s;
        }
        .nav-bar a:hover { color: var(--accent-color); }

        /* ── HEADER ───────────────────────────────────────── */
        .header {
            height: 28vh; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            text-align: center; gap: 12px;
        }
        .header h1 {
            font-size: clamp(2rem, 7vw, 5rem); font-weight: 100;
            letter-spacing: 2rem; margin: 0;
            color: var(--accent-color); text-transform: uppercase;
        }
        .header .subhead {
            font-family: monospace; font-size: 0.7rem;
            letter-spacing: 0.25rem; color: var(--dim-text); text-transform: uppercase;
        }

        /* ── LAYOUT ───────────────────────────────────────── */
        .main-content {
            display: grid; grid-template-columns: 280px 1fr;
            max-width: 1200px; margin: 0 auto;
            gap: 60px; padding: 60px 40px 100px;
        }

        /* ── SIDEBAR ──────────────────────────────────────── */
        .sidebar {
            font-family: monospace; font-size: 0.75rem;
            color: var(--dim-text);
            border-right: 1px solid var(--border);
            padding-right: 30px;
        }
        .sidebar-item { margin-bottom: 30px; }
        .sidebar-label {
            color: var(--accent-color); display: block;
            margin-bottom: 5px; letter-spacing: 0.1rem;
        }

        /* ── OSCILLOSCOPE ─────────────────────────────────── */
        .signal-widget {
            margin-bottom: 40px; border: 1px solid #1a1a1a;
            background: rgba(0,0,0,0.6); overflow: hidden;
        }
        .scope-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px 14px; border-bottom: 1px solid #1a1a1a;
            background: rgba(197,160,89,0.04);
        }
        .scope-label { color: var(--accent-color); font-family: monospace; font-size: 0.6rem; letter-spacing: 0.15rem; }
        .scope-state { font-family: monospace; font-size: 0.6rem; color: var(--dim-text); letter-spacing: 0.1rem; }
        .scope-state .blink { animation: blink 1s step-end infinite; }
        @keyframes blink { 50% { opacity: 0; } }
        .scope-canvas-wrap { position: relative; line-height: 0; }
        #scopeCanvas { display: block; width: 100%; height: 90px; }
        .scope-canvas-wrap::after {
            content: ''; position: absolute; inset: 0; pointer-events: none;
            background: repeating-linear-gradient(to bottom, transparent, transparent 2px, rgba(0,0,0,0.12) 2px, rgba(0,0,0,0.12) 4px);
        }
        .scope-footer { display: flex; justify-content: space-between; padding: 8px 14px; border-top: 1px solid #111; }
        .scope-meta { font-family: monospace; font-size: 0.55rem; color: #333; letter-spacing: 0.08rem; }
        .scope-meta.lit { color: #555; }
        @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.2} }

        /* ── COORDINATES EASTER EGG ───────────────────────── */
        .coords {
            margin-top: 40px; font-family: monospace; font-size: 0.6rem;
            color: #2a2a2a; line-height: 1.8; letter-spacing: 0.05rem;
            transition: color 0.5s; cursor: default; user-select: none;
        }
        .coords:hover { color: #555; }

        /* ── ENGINE PANEL ─────────────────────────────────── */
        .engine-panel {
            border: 1px solid #1a1a1a;
            background: rgba(0,0,0,0.7);
        }
        .engine-header {
            display: flex; align-items: center; gap: 12px;
            padding: 14px 20px; border-bottom: 1px solid #1a1a1a;
            background: rgba(255,255,255,0.02);
        }
        .engine-header .dot-row { display: flex; gap: 6px; }
        .engine-header .dot-row span { width: 10px; height: 10px; border-radius: 50%; background: #222; display: block; }
        .engine-header .title { font-family: monospace; font-size: 0.65rem; color: var(--dim-text); letter-spacing: 0.2rem; margin-left: auto; }
        .engine-body { padding: 30px 30px 10px; }

        .engine-status-bar {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 16px;
        }
        .corridor-label { font-family: monospace; font-size: 0.65rem; color: var(--accent-color); letter-spacing: 0.15rem; }
        .corridor-pct { font-family: monospace; font-size: 0.65rem; color: var(--dim-text); letter-spacing: 0.1rem; transition: color 0.5s; }
        .corridor-pct.danger { color: #e05555; animation: pulse 0.6s infinite; }

        .disk-wrap {
            position: relative; display: flex;
            justify-content: center; align-items: center;
            margin-bottom: 20px;
        }
        #diskCanvas { display: block; border: 1px solid #111; }

        .engine-log {
            font-family: monospace; font-size: 0.7rem;
            color: var(--dim-text); line-height: 1.9;
            min-height: 90px;
            border-left: 2px solid #1a1a1a;
            padding-left: 16px; margin-bottom: 24px;
            overflow: hidden;
        }
        .engine-log .log-line { opacity: 0; transition: opacity 0.4s; }
        .engine-log .log-line.show { opacity: 1; }
        .engine-log .log-line.warn { color: #e09050; }
        .engine-log .log-line.fail { color: #e05555; }
        .engine-log .log-line.success { color: #7ec88a; }
        .engine-log .log-line.gold { color: var(--accent-color); }

        .protocol-grid {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 10px; margin-bottom: 30px;
        }
        .proto-btn {
            background: transparent; border: 1px solid #2a2a2a;
            color: var(--dim-text); font-family: monospace;
            font-size: 0.6rem; letter-spacing: 0.12rem;
            padding: 12px 10px; cursor: pointer;
            text-align: left; text-transform: uppercase;
            transition: border-color 0.3s, color 0.3s, background 0.3s;
            line-height: 1.5;
        }
        .proto-btn:hover:not(:disabled) {
            border-color: var(--accent-color); color: var(--accent-color);
            background: rgba(197,160,89,0.04);
        }
        .proto-btn:disabled { opacity: 0.25; cursor: not-allowed; border-color: #111; }
        .proto-btn .btn-label { display: block; color: inherit; margin-bottom: 3px; }
        .proto-btn .btn-sub { display: block; font-size: 0.5rem; color: #444; letter-spacing: 0.08rem; }
        .proto-btn:hover:not(:disabled) .btn-sub { color: #888; }
        .proto-btn.used { border-color: #1a1a1a; color: #2a2a2a; }
        .proto-btn.used .btn-sub { color: #1a1a1a; }

        .lockout-msg {
            display: none; font-family: monospace; font-size: 0.7rem;
            color: #e05555; letter-spacing: 0.12rem;
            line-height: 2; text-align: center;
            padding: 20px; border: 1px solid #3a1a1a;
            background: rgba(220,50,50,0.04);
            margin-bottom: 20px;
            animation: pulse 1.2s infinite;
        }

        /* ── TERMINAL FORM ────────────────────────────────── */
        .terminal-panel {
            border: 1px solid #1a1a1a;
            background: rgba(255,255,255,0.01);
            display: none;
            margin-top: 40px;
        }
        .terminal-panel.revealed {
            display: block;
            animation: fadeSlideUp 0.8s ease forwards;
        }
        @keyframes fadeSlideUp {
            from { opacity: 0; transform: translateY(20px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        .terminal-header {
            display: flex; align-items: center; gap: 12px;
            padding: 14px 20px; border-bottom: 1px solid #1a1a1a;
            background: rgba(255,255,255,0.02);
        }
        .terminal-header .dot-row { display: flex; gap: 6px; }
        .terminal-header .dot-row span { width: 10px; height: 10px; border-radius: 50%; background: #222; display: block; }
        .terminal-header .title { font-family: monospace; font-size: 0.65rem; color: var(--dim-text); letter-spacing: 0.2rem; margin-left: auto; }
        .terminal-body { padding: 30px 30px 40px; }
        .terminal-intro {
            font-family: monospace; font-size: 0.7rem; color: var(--dim-text);
            line-height: 1.8; margin-bottom: 35px;
            border-left: 2px solid #1e1e1e; padding-left: 16px;
            white-space: pre-line;
        }
        .terminal-intro .prompt { color: var(--accent-color); }
        .field-group {
            margin-bottom: 28px; opacity: 0;
            transform: translateY(8px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .field-group.revealed { opacity: 1; transform: translateY(0); }
        .field-label {
            display: block; font-family: monospace; font-size: 0.65rem;
            color: var(--accent-color); letter-spacing: 0.2rem; margin-bottom: 8px;
        }
        .field-label::before { content: '> '; color: var(--dim-text); }
        .terminal-input, .terminal-select, .terminal-textarea {
            width: 100%; background: transparent; border: none;
            border-bottom: 1px solid #2a2a2a; color: var(--text-color);
            font-family: monospace; font-size: 0.85rem; padding: 10px 0;
            outline: none; transition: border-color 0.3s;
            letter-spacing: 0.05rem; appearance: none; -webkit-appearance: none;
        }
        .terminal-input:focus, .terminal-select:focus, .terminal-textarea:focus { border-bottom-color: var(--accent-color); }
        .terminal-input::placeholder, .terminal-textarea::placeholder { color: #333; }
        .terminal-input:focus, .terminal-textarea:focus { caret-color: var(--accent-color); }
        .terminal-select { cursor: pointer; }
        .terminal-select option { background: #0d0d0d; color: var(--text-color); }
        .terminal-textarea { resize: none; height: 120px; line-height: 1.7; }
        .char-counter { font-family: monospace; font-size: 0.6rem; color: #333; text-align: right; margin-top: 4px; transition: color 0.3s; }
        .char-counter.active { color: var(--dim-text); }
        .submit-row { display: flex; align-items: center; gap: 30px; margin-top: 40px; padding-top: 30px; border-top: 1px solid #111; }
        .btn-transmit {
            background: transparent; border: 1px solid var(--accent-color);
            color: var(--accent-color); padding: 14px 40px;
            font-family: monospace; font-size: 0.75rem; letter-spacing: 0.3rem;
            text-transform: uppercase; cursor: pointer; transition: 0.3s;
            position: relative; overflow: hidden;
        }
        .btn-transmit::before {
            content: ''; position: absolute; top: 0; left: -100%;
            width: 100%; height: 100%;
            background: var(--accent-color); transition: left 0.3s ease; z-index: 0;
        }
        .btn-transmit:hover::before { left: 0; }
        .btn-transmit:hover { color: #000; }
        .btn-transmit span { position: relative; z-index: 1; }
        .transmission-id { font-family: monospace; font-size: 0.6rem; color: #2a2a2a; letter-spacing: 0.1rem; }

        /* ── OVERLAY ──────────────────────────────────────── */
        .overlay {
            display: none; position: fixed; inset: 0;
            background: rgba(0,0,0,0.92); z-index: 100;
            align-items: center; justify-content: center; flex-direction: column;
        }
        .overlay.active { display: flex; }
        .overlay-terminal {
            font-family: monospace; font-size: 0.8rem; color: var(--accent-color);
            text-align: left; line-height: 2; letter-spacing: 0.1rem;
            max-width: 500px; width: 90%;
        }
        .overlay-terminal .line { opacity: 0; transform: translateY(4px); }
        .overlay-terminal .line.show { opacity: 1; transform: translateY(0); transition: opacity 0.3s, transform 0.3s; }
        .overlay-terminal .line.dim { color: var(--dim-text); }
        .overlay-terminal .line.success { color: #7ec88a; }
        .overlay-close {
            margin-top: 40px; font-family: monospace; font-size: 0.65rem;
            color: var(--dim-text); letter-spacing: 0.2rem; cursor: pointer;
            opacity: 0; transition: opacity 0.3s, color 0.3s;
            border: none; background: none; text-transform: uppercase;
        }
        .overlay-close:hover { color: var(--accent-color); }
        .overlay-close.show { opacity: 1; }

        footer { padding: 60px 40px; text-align: center; color: #333; font-size: 0.7rem; letter-spacing: 0.2rem; border-top: 1px solid #0f0f0f; }

        @media (max-width: 900px) {
            .main-content { grid-template-columns: 1fr; }
            .sidebar { border-right: none; border-bottom: 1px solid #1a1a1a; padding-bottom: 30px; padding-right: 0; }
        }
        @media (max-width: 600px) {
            .main-content { padding: 40px 20px 80px; }
            .nav-bar { gap: 20px; }
            .protocol-grid { grid-template-columns: 1fr; }
            .submit-row { flex-direction: column; align-items: flex-start; }
        }
    </style>
</head>
<body>

<nav class="nav-bar">
    <a href="index.html">Home</a>
    <a href="archive.html">Archive</a>
    <a href="briefing.html">Briefing</a>
    <a href="physics.html">Physics</a>
    <a href="contact.html">Contact</a>
</nav>

<div class="header">
    <h1>CONTACT</h1>
    <p class="subhead">Disruption Protocol // Cygnus Program // Dr. J. Chen</p>
</div>

<div class="main-content">

    <aside class="sidebar">
        <div class="signal-widget">
            <div class="scope-header">
                <span class="scope-label">UPLINK SIGNAL // CH-1</span>
                <span class="scope-state" id="scopeState"><span class="blink">█</span> ACQUIRING</span>
            </div>
            <div class="scope-canvas-wrap">
                <canvas id="scopeCanvas" width="260" height="90"></canvas>
            </div>
            <div class="scope-footer">
                <span class="scope-meta" id="scopeHz">FREQ: —</span>
                <span class="scope-meta" id="scopeAmp">AMP: —</span>
                <span class="scope-meta lit" id="scopeDb">— dB</span>
            </div>
        </div>

        <div class="sidebar-item">
            <span class="sidebar-label">CHANNEL</span>
            ENCRYPTED // AES-512 MESH
        </div>
        <div class="sidebar-item">
            <span class="sidebar-label">RELAY NODE</span>
            SAN FRANCISCO, EARTH
        </div>
        <div class="sidebar-item">
            <span class="sidebar-label">RESPONSE SLA</span>
            48 HRS [LOCAL TIME]
        </div>
        <div class="sidebar-item">
            <span class="sidebar-label">CLEARANCE REQ.</span>
            LEVEL IV // PRODUCTION
        </div>
        <div class="coords" title="">
            RA 19h 59m 28.3s<br>
            Dec +40° 44′ 02″<br>
            J2000.0
        </div>
    </aside>

    <section>

        <!-- ENGINE PANEL -->
        <div class="engine-panel">
            <div class="engine-header">
                <div class="dot-row"><span></span><span></span><span></span></div>
                <div class="title">PHAETHON ENGINE // BINARY INSPIRAL SYS-772B // LIVE TELEMETRY</div>
            </div>
            <div class="engine-body">
                <div class="engine-status-bar">
                    <span class="corridor-label">STERILIZATION CORRIDOR ALIGNMENT</span>
                    <span class="corridor-pct" id="corridorPct">12.3%</span>
                </div>
                <div class="disk-wrap">
                    <canvas id="diskCanvas" width="480" height="480"></canvas>
                </div>
                <div class="engine-log" id="engineLog">
                    <div class="log-line show gold" id="ll0">&gt; PHAETHON ENGINE TELEMETRY ACTIVE. CORRIDOR ALIGNMENT: 12.3%</div>
                    <div class="log-line show" id="ll1">&gt; DR. CHEN: "We have 5 disruption protocols loaded. Attempt them all."</div>
                    <div class="log-line show" id="ll2">&gt; WARNING: Each failure increases corridor alignment. Choose carefully.</div>
                </div>
                <div class="protocol-grid" id="protocolGrid">
                    <button class="proto-btn" data-proto="0">
                        <span class="btn-label">[ CHARGE PULSE ]</span>
                        <span class="btn-sub">Fire EM shockwave into accretion disk</span>
                    </button>
                    <button class="proto-btn" data-proto="1">
                        <span class="btn-label">[ REDIRECT ANGULAR MOMENTUM ]</span>
                        <span class="btn-sub">Attempt orbital ring reversal</span>
                    </button>
                    <button class="proto-btn" data-proto="2">
                        <span class="btn-label">[ INJECT MASS PERTURBATION ]</span>
                        <span class="btn-sub">Hurl mass body into disk axis</span>
                    </button>
                    <button class="proto-btn" data-proto="3">
                        <span class="btn-label">[ ATTEMPT COMMUNICATIONS ]</span>
                        <span class="btn-sub">Broadcast biological-agent signal</span>
                    </button>
                    <button class="proto-btn" data-proto="4" style="grid-column:1/-1;">
                        <span class="btn-label">[ OVERLOAD ARC ARRAY ]</span>
                        <span class="btn-sub">Saturate Dyson arc redundancy systems — last resort</span>
                    </button>
                </div>
                <div class="lockout-msg" id="lockoutMsg">
                    ALL DISRUPTION PROTOCOLS EXHAUSTED<br>
                    CORRIDOR ALIGNMENT: 100.000%<br>
                    T-MINUS 35 DAYS [RELATIVISTIC]<br><br>
                    TRANSMIT YOUR COORDINATES TO MISSION CONTROL
                </div>
            </div>
        </div>

        <!-- TERMINAL FORM — hidden until all protocols exhausted -->
        <div class="terminal-panel" id="terminalPanel">
            <div class="terminal-header">
                <div class="dot-row"><span></span><span></span><span></span></div>
                <div class="title">CYGNUS // SECURE TRANSMISSION INTERFACE v2.4</div>
            </div>
            <div class="terminal-body">
                <div class="terminal-intro"><span class="prompt" id="introText"></span></div>
                <form id="contactForm" novalidate>
                    <div class="field-group" id="fg1">
                        <label class="field-label" for="callsign">CALLSIGN / ORGANIZATION</label>
                        <input class="terminal-input" type="text" id="callsign" name="callsign" placeholder="e.g. MERIDIAN VFX // FREELANCE" autocomplete="off">
                    </div>
                    <div class="field-group" id="fg2">
                        <label class="field-label" for="email">RETURN SIGNAL ADDRESS</label>
                        <input class="terminal-input" type="email" id="email" name="email" placeholder="your@email.com" autocomplete="off">
                    </div>
                    <div class="field-group" id="fg3">
                        <label class="field-label" for="txtype">TRANSMISSION TYPE</label>
                        <select class="terminal-select" id="txtype" name="txtype">
                            <option value="" disabled selected>— SELECT CLEARANCE TYPE —</option>
                            <option value="vfx">VFX COLLABORATION</option>
                            <option value="cinema">CINEMATOGRAPHY COLLABORATION</option>
                            <option value="production">PRODUCTION PARTNERSHIP</option>
                            <option value="press">PRESS / FESTIVAL INQUIRY</option>
                            <option value="other">OTHER // UNCLASSIFIED</option>
                        </select>
                    </div>
                    <div class="field-group" id="fg4">
                        <label class="field-label" for="payload">ENCRYPTED PAYLOAD</label>
                        <textarea class="terminal-textarea" id="payload" name="payload" placeholder="Describe your background, capabilities, and what draws you to this project..."></textarea>
                        <div class="char-counter" id="charCounter">0 / 1000</div>
                    </div>
                    <div class="submit-row">
                        <button type="submit" class="btn-transmit"><span>⟶ TRANSMIT</span></button>
                        <div class="transmission-id" id="txId"></div>
                    </div>
                </form>
            </div>
        </div>

    </section>
</div>

<div class="overlay" id="overlay">
    <div class="overlay-terminal">
        <div class="line dim" id="ol1">CYGNUS PROGRAM // MISSION CONTROL</div>
        <div class="line" id="ol2">────────────────────────────────</div>
        <div class="line dim" id="ol3">INITIATING SECURE HANDSHAKE...</div>
        <div class="line dim" id="ol4">ROUTING TO DR. J. CHEN...</div>
        <div class="line dim" id="ol5">ENCRYPTING PAYLOAD...</div>
        <div class="line dim" id="ol6">SIGNAL LOCK CONFIRMED.</div>
        <div class="line success" id="ol7">✓ TRANSMISSION ACKNOWLEDGED.</div>
        <div class="line dim" id="ol8" style="margin-top:10px;">RESPONSE ETA: 48 HRS [LOCAL REFERENCE FRAME]</div>
    </div>
    <button class="overlay-close" id="overlayClose">[ CLOSE CHANNEL ]</button>
</div>

<footer>&copy; 2026 CYGNUS PRODUCTIONS // SAN FRANCISCO, CALIFORNIA</footer>

<script>
// ═══════════════════════════════════════════════════════
//  OSCILLOSCOPE
// ═══════════════════════════════════════════════════════
(function(){
    const canvas=document.getElementById('scopeCanvas');
    const ctx=canvas.getContext('2d');
    const stateEl=document.getElementById('scopeState');
    const hzEl=document.getElementById('scopeHz');
    const ampEl=document.getElementById('scopeAmp');
    const dbEl=document.getElementById('scopeDb');
    const GOLD='#c5a059',GOLD_DIM='rgba(197,160,89,0.15)',GOLD_GLOW='rgba(197,160,89,0.5)';
    function resize(){const r=canvas.parentElement.getBoundingClientRect();canvas.width=r.width||260;canvas.height=90;}
    resize(); window.addEventListener('resize',resize);
    const phases=['ACQUIRING','WEAK_SIGNAL','LOCKED','LOCKED','LOCKED','DISRUPTED','LOCKED'];
    let pi=0,pt=0,pd=120,freq=0.02,amp=0.1,ta=0.1,noise=0.8,tn=0.8,flat=false,fr=0;
    const H=260,wh=new Array(H).fill(0);
    function sample(){if(flat)return 0;const t=fr*freq*Math.PI*2;return Math.sin(t)*amp+(Math.random()-0.5)*noise+Math.sin(t*3.7+1.2)*amp*0.3;}
    function updatePhase(){
        pt++;amp+=(ta-amp)*0.04;noise+=(tn-noise)*0.04;
        if(pt>=pd){pt=0;pi=(pi+1)%phases.length;const p=phases[pi];
            if(p==='ACQUIRING'){ta=0.08+Math.random()*0.1;tn=0.6+Math.random()*0.4;freq=0.015+Math.random()*0.01;flat=false;pd=80+Math.random()*60;}
            else if(p==='WEAK_SIGNAL'){ta=0.15+Math.random()*0.15;tn=0.3+Math.random()*0.2;freq=0.025+Math.random()*0.015;flat=false;pd=60+Math.random()*40;}
            else if(p==='LOCKED'){ta=0.35+Math.random()*0.2;tn=0.04+Math.random()*0.06;freq=0.03+Math.random()*0.02;flat=false;pd=140+Math.random()*100;}
            else if(p==='DISRUPTED'){ta=0.9;tn=1.2;flat=false;pd=25;setTimeout(()=>{flat=true;ta=0;tn=0;setTimeout(()=>{flat=false;ta=0.35;tn=0.05;},1800);},400);}
        }
    }
    function label(){const p=phases[pi];if(p==='ACQUIRING')return'<span class="blink">█</span> ACQUIRING';if(p==='WEAK_SIGNAL')return'<span class="blink">█</span> WEAK SIGNAL';if(p==='DISRUPTED')return'<span class="blink">█</span> SIGNAL LOST';return'● UPLINK LOCKED';}
    function draw(){
        const W=canvas.width,MID=canvas.height/2;
        ctx.clearRect(0,0,W,canvas.height);
        ctx.strokeStyle='rgba(197,160,89,0.06)';ctx.lineWidth=1;
        for(let y=0;y<=canvas.height;y+=canvas.height/4){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(W,y);ctx.stroke();}
        for(let x=0;x<=W;x+=W/6){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,canvas.height);ctx.stroke();}
        ctx.strokeStyle='rgba(197,160,89,0.12)';ctx.setLineDash([4,4]);
        ctx.beginPath();ctx.moveTo(0,MID);ctx.lineTo(W,MID);ctx.stroke();ctx.setLineDash([]);
        ctx.strokeStyle=GOLD_DIM;ctx.lineWidth=4;ctx.shadowBlur=0;
        ctx.beginPath();for(let i=0;i<wh.length;i++){const x=(i/(wh.length-1))*W,y=MID-wh[i]*(canvas.height*0.42);i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);}ctx.stroke();
        ctx.shadowColor=GOLD_GLOW;ctx.shadowBlur=8;ctx.strokeStyle=GOLD;ctx.lineWidth=1.5;
        ctx.beginPath();for(let i=0;i<wh.length;i++){const x=(i/(wh.length-1))*W,y=MID-wh[i]*(canvas.height*0.42);i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);}ctx.stroke();ctx.shadowBlur=0;
        const ly=MID-wh[wh.length-1]*(canvas.height*0.42);
        ctx.fillStyle='#fff';ctx.shadowColor=GOLD;ctx.shadowBlur=12;
        ctx.beginPath();ctx.arc(W-1,ly,2.5,0,Math.PI*2);ctx.fill();ctx.shadowBlur=0;
    }
    let mt=0;
    function tick(){updatePhase();wh.shift();wh.push(sample());draw();
        if(mt++%8===0){const p=phases[pi];if(p==='ACQUIRING'||p==='DISRUPTED'){hzEl.textContent='FREQ: —';ampEl.textContent='AMP: —';dbEl.textContent='— dB';}
        else{hzEl.textContent=`FREQ: ${(freq*1000).toFixed(1)} kHz`;ampEl.textContent=`AMP: ${amp.toFixed(2)}`;const db=Math.round(-60+amp*100);dbEl.textContent=`${db>0?'+':''}${db} dB`;}
        stateEl.innerHTML=label();}
        fr++;requestAnimationFrame(tick);}
    tick();
})();


// ═══════════════════════════════════════════════════════
//  ACCRETION DISK ENGINE
// ═══════════════════════════════════════════════════════
(function(){
    const canvas=document.getElementById('diskCanvas');
    const ctx=canvas.getContext('2d');
    let CX=240,CY=240;

    function resizeDisk(){
        const wrap=canvas.parentElement;
        const size=Math.min(wrap.clientWidth,480);
        canvas.width=size;canvas.height=size;
        CX=size/2;CY=size/2;
    }
    resizeDisk();
    window.addEventListener('resize',resizeDisk);

    // State
    let corridorPct=12.3;
    let diskSpeed=0.0008;
    let jetIntensity=0.3,targetJet=0.3;
    let diskRotation=0;
    let diskReverse=false,reverseTimer=0;
    let diskWobble=0;
    let jetSpike=0;
    let overloadFlash=0;
    let protosUsed=0;
    let buttonsLocked=false;

    // Effects
    let shockwave={active:false,r:0,alpha:0};
    let blob=null;
    let comms={active:false,r:0,alpha:0};
    let crackles=[];

    // Rings
    const rings=[
        {r:0.08,color:'#ffffff',alpha:0.9,w:2.5},
        {r:0.12,color:'#ffe0a0',alpha:0.8,w:2},
        {r:0.17,color:'#ffc060',alpha:0.7,w:2},
        {r:0.22,color:'#e09040',alpha:0.65,w:1.8},
        {r:0.27,color:'#c5a059',alpha:0.6,w:1.5},
        {r:0.33,color:'#a07030',alpha:0.5,w:1.5},
        {r:0.40,color:'#804020',alpha:0.35,w:1.2},
        {r:0.47,color:'#603010',alpha:0.25,w:1},
    ];
    const dysonArcs=[
        {r:0.60,a0:0.1,a1:Math.PI*0.7,alpha:0.15,w:1.5},
        {r:0.68,a0:Math.PI*0.9,a1:Math.PI*1.8,alpha:0.12,w:1.5},
        {r:0.75,a0:Math.PI*1.5,a1:Math.PI*2.4,alpha:0.1,w:1},
    ];

    // Particles
    const particles=[];
    for(let i=0;i<120;i++){
        const angle=Math.random()*Math.PI*2;
        const rFrac=0.08+Math.random()*0.45;
        particles.push({angle,rFrac,speed:(0.0004+Math.random()*0.0008)*(1/rFrac),
            alpha:0.1+Math.random()*0.5,size:0.5+Math.random()*1.5,
            color:Math.random()<0.3?'#ffffff':'#c5a059'});
    }

    function drawBlackHole(S){
        const r=S*0.055;
        const g=ctx.createRadialGradient(CX,CY,r*0.3,CX,CY,r*2.5);
        g.addColorStop(0,'rgba(255,200,100,0.25)');
        g.addColorStop(0.4,'rgba(197,160,89,0.1)');
        g.addColorStop(1,'rgba(0,0,0,0)');
        ctx.fillStyle=g;ctx.beginPath();ctx.arc(CX,CY,r*2.5,0,Math.PI*2);ctx.fill();
        ctx.fillStyle='#000';ctx.beginPath();ctx.arc(CX,CY,r,0,Math.PI*2);ctx.fill();
        ctx.strokeStyle='rgba(255,220,120,0.6)';ctx.lineWidth=1.2;
        ctx.beginPath();ctx.arc(CX,CY,r*1.15,0,Math.PI*2);ctx.stroke();
    }

    function drawRings(S){
        rings.forEach((ring,ri)=>{
            const r=ring.r*S;
            const wo=diskWobble*Math.sin(diskRotation*4+ri)*S*0.004;
            ctx.save();ctx.translate(CX,CY);ctx.scale(1,0.28+Math.abs(diskWobble)*0.05);
            ctx.strokeStyle=ring.color;
            ctx.globalAlpha=ring.alpha*(0.7+jetIntensity*0.3);
            ctx.lineWidth=ring.w*(S/480);
            ctx.shadowColor=ring.color;ctx.shadowBlur=4+jetIntensity*8;
            ctx.beginPath();ctx.arc(wo,0,r,0,Math.PI*2);ctx.stroke();
            ctx.shadowBlur=0;ctx.restore();
        });
    }

    function drawDysonArcs(S){
        dysonArcs.forEach(arc=>{
            const r=arc.r*S;
            const fb=overloadFlash>0?(Math.sin(overloadFlash*0.8)*0.5+0.5)*0.4:0;
            ctx.save();ctx.translate(CX,CY);ctx.scale(1,0.28);
            ctx.strokeStyle='#c5a059';
            ctx.globalAlpha=arc.alpha+fb;
            ctx.lineWidth=arc.w*(S/480);
            ctx.shadowColor='#c5a059';ctx.shadowBlur=overloadFlash>0?20:6;
            ctx.beginPath();ctx.arc(0,0,r,arc.a0+diskRotation*0.1,arc.a1+diskRotation*0.1);
            ctx.stroke();ctx.shadowBlur=0;ctx.restore();
        });
    }

    function drawParticles(S){
        const dir=diskReverse?-1:1;
        particles.forEach(p=>{
            p.angle+=p.speed*dir*(diskReverse&&reverseTimer>0?0.5:1);
            const r=p.rFrac*S;
            const x=CX+Math.cos(p.angle)*r;
            const y=CY+Math.sin(p.angle)*r*0.28;
            ctx.fillStyle=p.color;
            ctx.globalAlpha=p.alpha*(0.5+jetIntensity*0.5);
            ctx.beginPath();ctx.arc(x,y,p.size*(S/480),0,Math.PI*2);ctx.fill();
        });
        ctx.globalAlpha=1;
    }

    function drawJet(S){
        const jLen=(0.3+jetIntensity*0.55+jetSpike)*S;
        const jW=(0.018+jetIntensity*0.025)*S;
        [-1,1].forEach(dir=>{
            const yEnd=CY+dir*jLen;
            const g=ctx.createLinearGradient(CX,CY,CX,yEnd);
            g.addColorStop(0,`rgba(255,220,150,${0.5+jetIntensity*0.4})`);
            g.addColorStop(0.4,`rgba(197,160,89,${0.25+jetIntensity*0.3})`);
            g.addColorStop(1,'rgba(197,160,89,0)');
            ctx.fillStyle=g;
            ctx.beginPath();
            ctx.moveTo(CX-jW*0.5,CY);
            ctx.bezierCurveTo(CX-jW,CY+dir*jLen*0.3,CX-jW*0.1,yEnd*0.8+CY*0.2,CX,yEnd);
            ctx.bezierCurveTo(CX+jW*0.1,yEnd*0.8+CY*0.2,CX+jW,CY+dir*jLen*0.3,CX+jW*0.5,CY);
            ctx.fill();
            ctx.strokeStyle=`rgba(255,240,200,${0.7+jetIntensity*0.25})`;
            ctx.lineWidth=1.5*(S/480);
            ctx.shadowColor='rgba(255,220,150,0.8)';ctx.shadowBlur=12;
            ctx.beginPath();ctx.moveTo(CX,CY);ctx.lineTo(CX,yEnd);ctx.stroke();
            ctx.shadowBlur=0;
        });
    }

    function drawEffects(S){
        // Shockwave
        if(shockwave.active){
            shockwave.r+=4*(S/480);shockwave.alpha-=0.012;
            if(shockwave.alpha<=0){shockwave.active=false;}
            else{
                ctx.save();ctx.translate(CX,CY);ctx.scale(1,0.28);
                ctx.strokeStyle=`rgba(200,220,255,${shockwave.alpha})`;ctx.lineWidth=2*(S/480);
                ctx.shadowColor='rgba(180,200,255,0.8)';ctx.shadowBlur=15;
                ctx.beginPath();ctx.arc(0,0,shockwave.r,0,Math.PI*2);ctx.stroke();
                ctx.shadowBlur=0;ctx.restore();
            }
        }
        // Blob
        if(blob){
            blob.x+=blob.vx;blob.y+=blob.vy;
            const dx=blob.x-CX,dy=(blob.y-CY)/0.28;
            const dist=Math.sqrt(dx*dx+dy*dy);
            blob.vx+=-dx/dist*0.3;blob.vy+=(-dy/dist*0.3)*0.28;
            blob.alpha-=0.004;
            if(blob.alpha<=0||dist<S*0.06){blob=null;}
            else{
                const g=ctx.createRadialGradient(blob.x,blob.y,0,blob.x,blob.y,blob.r*(S/480)*3);
                g.addColorStop(0,`rgba(255,255,200,${blob.alpha})`);
                g.addColorStop(1,'rgba(255,200,100,0)');
                ctx.fillStyle=g;ctx.beginPath();ctx.arc(blob.x,blob.y,blob.r*(S/480)*3,0,Math.PI*2);ctx.fill();
            }
        }
        // Comms
        if(comms.active){
            comms.r+=3.5*(S/480);comms.alpha-=0.008;
            if(comms.alpha<=0){comms.active=false;}
            else{
                ctx.save();ctx.translate(CX,CY);
                ctx.strokeStyle=`rgba(150,200,255,${comms.alpha})`;ctx.lineWidth=1.5*(S/480);
                ctx.setLineDash([8,6]);ctx.shadowColor='rgba(150,200,255,0.6)';ctx.shadowBlur=10;
                ctx.beginPath();ctx.arc(0,0,comms.r,0,Math.PI*2);ctx.stroke();
                ctx.setLineDash([]);ctx.shadowBlur=0;ctx.restore();
            }
        }
        // Crackles
        crackles=crackles.filter(c=>c.life>0);
        crackles.forEach(c=>{
            c.life--;const prog=c.life/c.maxLife;
            ctx.strokeStyle=`rgba(255,220,80,${prog*0.9})`;ctx.lineWidth=1+(1-prog);
            ctx.shadowColor='rgba(255,200,50,0.8)';ctx.shadowBlur=8;
            ctx.beginPath();ctx.moveTo(c.x,c.y);
            ctx.lineTo(c.x+Math.cos(c.angle)*c.len*prog,c.y+Math.sin(c.angle)*c.len*prog);
            ctx.stroke();ctx.shadowBlur=0;
        });
    }

    function drawFrame(){
        const S=canvas.width;
        ctx.clearRect(0,0,S,S);
        const bg=ctx.createRadialGradient(CX,CY,0,CX,CY,S*0.6);
        bg.addColorStop(0,'rgba(20,10,5,1)');bg.addColorStop(1,'rgba(0,0,0,1)');
        ctx.fillStyle=bg;ctx.fillRect(0,0,S,S);
        jetIntensity+=(targetJet-jetIntensity)*0.03;
        if(jetSpike>0)jetSpike*=0.94;
        if(diskWobble>0)diskWobble*=0.97;
        if(reverseTimer>0)reverseTimer--;else diskReverse=false;
        if(overloadFlash>0)overloadFlash--;
        diskRotation+=diskSpeed*(diskReverse?-0.4:1);
        drawDysonArcs(S);drawRings(S);drawParticles(S);
        drawBlackHole(S);drawJet(S);drawEffects(S);
        document.getElementById('corridorPct').textContent=corridorPct.toFixed(1)+'%';
        if(corridorPct>=80)document.getElementById('corridorPct').classList.add('danger');
        requestAnimationFrame(drawFrame);
    }
    drawFrame();

    // Protocols
    const protocols=[
        {
            alignmentDelta:8.4,
            action(){
                shockwave={active:true,r:S()*0.06,alpha:0.9};
                setTimeout(()=>{shockwave={active:true,r:S()*0.02,alpha:0.5};},400);
                diskWobble=0.8;
            },
            log:[
                {cls:'warn',text:'> PULSE FIRED. EM shockwave propagating through accretion disk...'},
                {cls:'fail',text:'> RESULT: Pulse absorbed by disk plasma. INSUFFICIENT MASS DIFFERENTIAL.'},
                {cls:'',    text:'> Phaethon arc compensation detected. Corridor alignment updated.'},
            ]
        },
        {
            alignmentDelta:14.7,
            action(){diskReverse=true;reverseTimer=180;diskWobble=1.2;setTimeout(()=>{diskSpeed*=1.3;},2000);},
            log:[
                {cls:'warn',text:'> INITIATING orbital ring reversal... disk rotation counter-directed.'},
                {cls:'fail',text:'> RESULT: Phaethon arc array compensated in 1.7 seconds.'},
                {cls:'fail',text:'> Backlash: disk spin restored. Angular velocity INCREASED +30%.'},
            ]
        },
        {
            alignmentDelta:19.2,
            action(){
                const sz=S();
                blob={x:CX+sz*0.55,y:CY-sz*0.1,vx:-2.2,vy:0.5,r:6,alpha:0.95};
                targetJet=Math.min(1,jetIntensity+0.35);jetSpike=0.25;
                setTimeout(()=>{targetJet=Math.max(0.4,targetJet-0.1);},3000);
            },
            log:[
                {cls:'warn',text:'> MASS BODY LAUNCHED. Trajectory calculated for disk axis intercept...'},
                {cls:'fail',text:'> RESULT: Perturbation consumed. JET INTENSITY +14%.'},
                {cls:'fail',text:'> Dr. Chen: "We made it worse. The math just absorbed us."'},
            ]
        },
        {
            alignmentDelta:11.1,
            action(){
                comms={active:true,r:S()*0.06,alpha:1.0};
                diskSpeed*=0.5;
                setTimeout(()=>{comms={active:true,r:S()*0.04,alpha:0.7};setTimeout(()=>{diskSpeed/=0.5;},1500);},1800);
            },
            log:[
                {cls:'',    text:'> BROADCASTING biological-agent signal on all frequencies...'},
                {cls:'',    text:'> ...'},
                {cls:'',    text:'> ...'},
                {cls:'fail',text:'> NO RESPONSE. Biological variables not recognized as agents.'},
                {cls:'fail',text:'> Disk resumed. Speed increase detected. We are being ignored.'},
            ]
        },
        {
            alignmentDelta:34.2,
            action(){
                overloadFlash=200;
                const sz=S();
                for(let i=0;i<40;i++){
                    setTimeout(()=>{
                        const angle=Math.random()*Math.PI*2;
                        const r=(0.55+Math.random()*0.25)*sz;
                        crackles.push({
                            x:CX+Math.cos(angle)*r*0.5,y:CY+Math.sin(angle)*r*0.15,
                            angle:Math.random()*Math.PI*2,len:10+Math.random()*30,
                            life:20+Math.random()*30,maxLife:50
                        });
                    },i*60);
                }
                targetJet=1.0;jetSpike=0.4;
                setTimeout(()=>{targetJet=1.0;diskSpeed*=1.5;overloadFlash=0;},3500);
            },
            log:[
                {cls:'warn',text:'> SATURATING ARC REDUNDANCY SYSTEMS... energy surge detected...'},
                {cls:'warn',text:'> Arc array destabilizing... crackles across Dyson infrastructure...'},
                {cls:'warn',text:'> JET FLUCTUATING — it\'s working—'},
                {cls:'fail',text:'> ARC REDUNDANCY ENGAGED. Self-repair: 100% in 3.4 seconds.'},
                {cls:'fail',text:'> STERILIZATION CORRIDOR REALIGNED. Jet intensity maximum.'},
                {cls:'fail',text:'> Dr. Chen: "That\'s it. We\'re out of options."'},
            ]
        }
    ];

    function S(){return canvas.width;}

    function showLog(lines,onDone){
        const logEl=document.getElementById('engineLog');
        logEl.querySelectorAll('.dynamic-log').forEach(el=>el.remove());
        lines.forEach((line,i)=>{
            const div=document.createElement('div');
            div.className='log-line dynamic-log'+(line.cls?' '+line.cls:'');
            div.textContent=line.text;
            logEl.appendChild(div);
            setTimeout(()=>div.classList.add('show'),i*420);
        });
        if(onDone)setTimeout(onDone,lines.length*420+300);
    }

    document.getElementById('protocolGrid').addEventListener('click',e=>{
        const btn=e.target.closest('.proto-btn');
        if(!btn||buttonsLocked)return;
        const idx=parseInt(btn.dataset.proto);
        const proto=protocols[idx];
        btn.disabled=true;btn.classList.add('used');
        buttonsLocked=true;protosUsed++;
        corridorPct=Math.min(100,corridorPct+proto.alignmentDelta);
        proto.action();
        showLog(proto.log,()=>{
            buttonsLocked=false;
            if(protosUsed>=5)triggerLockout();
        });
    });

    function triggerLockout(){
        document.querySelectorAll('.proto-btn').forEach(b=>b.disabled=true);
        corridorPct=100.0;targetJet=1.0;jetSpike=0.5;diskSpeed*=1.2;
        document.getElementById('lockoutMsg').style.display='block';
        setTimeout(revealForm,2800);
    }

    function revealForm(){
        const panel=document.getElementById('terminalPanel');
        panel.classList.add('revealed');
        panel.scrollIntoView({behavior:'smooth',block:'start'});
        const lines=[
            '> ALL DISRUPTION PROTOCOLS EXHAUSTED.',
            '> The math cannot be broken with Type I technology.',
            '> Dr. Chen: "Then we find someone who can help us build something better."',
            '> UPLINK OPEN. Transmit your coordinates to Mission Control.',
        ];
        const el=document.getElementById('introText');
        let built='';
        function type(li,ci){
            if(li>=lines.length){revealFields();return;}
            const line=lines[li];
            if(ci<=line.length){built=lines.slice(0,li).join('\n')+'\n'+line.slice(0,ci);el.textContent=built;setTimeout(()=>type(li,ci+1),18);}
            else{built=lines.slice(0,li+1).join('\n');el.textContent=built;setTimeout(()=>type(li+1,0),280);}
        }
        setTimeout(()=>type(0,0),400);
    }

    function revealFields(){
        ['fg1','fg2','fg3','fg4'].forEach((id,i)=>{
            setTimeout(()=>document.getElementById(id)?.classList.add('revealed'),i*180);
        });
        const h=()=>Math.floor(Math.random()*0xFFFF).toString(16).toUpperCase().padStart(4,'0');
        document.getElementById('txId').textContent=`TX-${h()}-${h()}-${Date.now().toString(36).toUpperCase()}`;
    }

    // Form
    const payloadEl=document.getElementById('payload');
    const counterEl=document.getElementById('charCounter');
    payloadEl.addEventListener('input',()=>{
        const len=payloadEl.value.length;
        counterEl.textContent=`${len} / 1000`;
        counterEl.classList.toggle('active',len>0);
        counterEl.style.color=len>950?'#c5a059':'';
    });
    document.getElementById('contactForm').addEventListener('submit',e=>{
        e.preventDefault();
        const ov=document.getElementById('overlay');
        ov.classList.add('active');
        ['ol1','ol2','ol3','ol4','ol5','ol6','ol7','ol8'].forEach((id,i)=>{
            setTimeout(()=>document.getElementById(id)?.classList.add('show'),i*350);
        });
        setTimeout(()=>document.getElementById('overlayClose').classList.add('show'),8*350+400);
    });
    document.getElementById('overlayClose').addEventListener('click',()=>{
        const ov=document.getElementById('overlay');
        ov.classList.remove('active');
        document.querySelectorAll('.overlay-terminal .line').forEach(el=>el.classList.remove('show'));
        document.getElementById('overlayClose').classList.remove('show');
        document.getElementById('contactForm').reset();
        document.getElementById('charCounter').textContent='0 / 1000';
    });
})();
</script>
</body>
</html>
